<tal:page_with_sidebar_template metal:use-macro="load: main_template.pt">
    <div metal:fill-slot='body'>

        <h1>Cargo Class Scheme - for Vehicle Authors</h1>
        <p class="lead">Scheme ID: ${cargo_class_scheme.name}</p>

        <hr />

        <p>Sections:</p>
        <ul>
            <li><a href="#CABBAGE">CABBAGE</a></li>
            <li><a href="#example-vehicles">Example Vehicles</a></li>
        </ul>

        <hr style="margin-top:30px; margin-bottom:30px;" />

        <h2 id="example-vehicles">CABBAGE</h2>

        <h3>Passenger Vehicle</h3>

        <h4>Refittable Classes</h4>
        <p>CC_PASSENGERS</p>

        <h4>Non-Refittable Classes</h4>
        <p>None</p>

        <h3>Mail Vehicle</h3>

        <h4>Refittable Classes</h4>
        <p>CC_MAIL, possibly CC_EXPRESS</p>

        <h4>Non-Refittable Classes</h4>
        <p>Usually none.</p>

        <h3>Freight Vehicle</h3>

        <h4>Refittable Classes</h4>

        <p>Set a <strong>basic handling</strong> class.</p>
        <p>Most vehicles should set <strong>one</strong> of these classes. In most cases setting more than one is not helpful, but there may be exceptions, for example, intermodal container vehicles.</p>
        <p>Some highly specialised types might not set any of these classes, and may instead depend on refitting to specific cargo labels, for example nuclear fuel transporters or livestock vans.</p>
        <ul>
            <tal:cabbage repeat="cargo_class_id cargo_class_scheme.cargo_classes_taxonomy_by_tags['Freight']['Basic Handling']">
                <li>${cargo_class_id}</li>
            </tal:cabbage>
        </ul>

        <p>Set any <strong>special handling</strong> classes that apply.</p>
        <ul>
            <tal:cabbage repeat="cargo_class_id cargo_class_scheme.cargo_classes_taxonomy_by_tags['Freight']['Special Handling']">
                <li>${cargo_class_id}</li>
            </tal:cabbage>
        </ul>

        <h4>Non-Refittable Classes</h4>
        <p>Most vehicles should set <strong>one</strong> of the <strong>potable status</strong> clases.</p>
        <p><strong>Never</strong> set both of these classees.</p>
        <p><strong>Never</strong> set these classes as refittable, they are exclude-only.</p>
        <p>Some highly specialised vehicles may not need to set any of these classes, and may instead depend on refitting to specific cargo labels.</p>
        <ul>
            <tal:cabbage repeat="cargo_class_id cargo_class_scheme.cargo_classes_taxonomy_by_tags['Freight']['Potable Status']">
                <li>${cargo_class_id}</li>
            </tal:cabbage>
        </ul>
        <p>Sometimes it's helpful to be able to exclude weird cargos from general vehicles.</p>
        <ul>
            <li>CC_WEIRD</li>
        </ul>

        <hr style="margin-top:30px; margin-bottom:30px;" />

        <h2 id="example-vehicles">Example Vehicles</h2>
        <!--! table of contents -->
        <table class="table table-striped table-condensed table-bordered tablesorter">
            <tr>
                <th>Example vehicle</th>
            </tr>
            <tal:vehicle_nodes repeat="vehicle_node sorted(cargo_class_scheme.example_vehicles.items())">
                <tal:example_vehicle define="vehicle_node_id vehicle_node[0]; example_vehicle vehicle_node[1];">
                    <tr>
                        <td><a href="#${vehicle_node_id}">${example_vehicle.name}</a></td>
                    </tr>
                </tal:example_vehicle>
            </tal:vehicle_nodes>
        </table>

        <tal:example_vehicle_nodes repeat="example_vehicle_node sorted(cargo_class_scheme.example_vehicles.items())">
            <tal:example_vehicle define="example_vehicle_node_id example_vehicle_node[0]; example_vehicle example_vehicle_node[1];">
                <hr style="margin-top:30px; margin-bottom:30px;" />
                <h2 id="${example_vehicle_node_id}">
                    ${example_vehicle.name} <span class="muted">(example)</span>
                </h2>
                <table class="cargo-class-facts">
                    <tbody>
                        <tr>
                            <th>Vehicle description</th>
                            <td>${example_vehicle.vehicle_description}</td>
                        </tr>
                        <tr>
                            <th>Cargo classes allowed</th>
                            <td>
                                <tal:block repeat="cargo_class example_vehicle.cargo_classes_allowed">
                                    ${cargo_class}
                                </tal:block>
                            </td>
                        </tr>
                        <tr>
                            <th>Cargo classes disallowed</th>
                            <td>
                                <tal:block repeat="cargo_class example_vehicle.cargo_classes_disallowed">
                                    ${cargo_class}
                                </tal:block>
                            </td>
                        </tr>
                        <tr>
                            <th>Example cargos</th>
                            <td>
                                <tal:block repeat="example_cargo sorted(cargo_class_scheme.vehicle_cargo_mapping.get(example_vehicle_node_id, []))">
                                    <tal:vehicle switch="example_cargo in cargo_class_scheme.example_cargos">
                                        <tal:valid_cargo case="True">
                                            <a href="#${example_cargo}">${cargo_class_scheme.example_cargos[example_cargo].name}</a><!--! whitespace shenans
                                         -->${',' if not repeat.example_cargo.end else None}
                                        </tal:valid_cargo>
                                        <tal:invalid_cargo case="False">
                                            ${example_cargo}
                                        </tal:invalid_cargo>
                                    </tal:vehicle>
                                </tal:block>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </tal:example_vehicle>
        </tal:example_vehicle_nodes>

    </div>
</tal:page_with_sidebar_template>
