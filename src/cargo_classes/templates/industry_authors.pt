<tal:page_with_sidebar_template metal:use-macro="load: main_template.pt">
    <div metal:fill-slot='body'>

        <h1>Cargo Class Scheme - for Industry Authors</h1>
        <p class="lead">Scheme ID: ${cargo_class_scheme.name}</p>

        <hr />

        <p>Sections:</p>
        <ul>
            <li><a href="#CABBAGE">CABBAGE</a></li>
            <li><a href="#example-cargos">Example Cargos</a></li>
        </ul>

        <hr style="margin-top:30px; margin-bottom:30px;" />

        <h2 id="example-vehicles">CABBAGE</h2>

        <h3>Passenger Cargo</h3>
        <p>Set CC_PASSENGERS</p>

        <h3>Mail Cargo</h3>
        <p>Set CC_MAIL</p>

        <h3>Freight Cargo</h3>


        <p>Set <strong>potable status</strong></p>
        <p>This is a boolean flag (true / false), and should be set appropriately for <strong>all</strong> freight cargos.</p>
        <ul>
            <tal:cabbage repeat="cargo_class_id cargo_class_scheme.cargo_classes_taxonomy_by_tags['Freight']['Potable Status']">
                <li>${cargo_class_id}</li>
            </tal:cabbage>
        </ul>

        <p>Set at least one <strong>basic handling</strong> class.</p>
        <p>This provides basic compatibility with vehicles.</p>
        <ul>
            <tal:cabbage repeat="cargo_class_id cargo_class_scheme.cargo_classes_taxonomy_by_tags['Freight']['Basic Handling']">
                <li>${cargo_class_id}</li>
            </tal:cabbage>
        </ul>

        <p>Set any <strong>special handling</strong> classes that apply.</p>
        <ul>
            <tal:cabbage repeat="cargo_class_id cargo_class_scheme.cargo_classes_taxonomy_by_tags['Freight']['Special Handling']">
                <li>${cargo_class_id}</li>
            </tal:cabbage>
        </ul>

        <hr style="margin-top:30px; margin-bottom:30px;" />

        <h2 id="example-cargos">Example Cargos</h2>
        <!--! table of contents -->
        <table class="table table-striped table-condensed table-bordered tablesorter">
            <tr>
                <th>Example Cargo</th>
                <th>Recommended Classes</th>
            </tr>
            <tal:cargo_nodes repeat="cargo_node sorted(cargo_class_scheme.example_cargos.items())">
                <tal:example_cargo define="cargo_node_id cargo_node[0]; example_cargo cargo_node[1];">
                    <tr>
                        <td><a href="#${cargo_node_id}">${example_cargo.name}</a></td>
                        <!--! showing classes might be overkill, dunno -->
                        <td style="width:50%;">
                            <tal:block repeat="cargo_class example_cargo.cargo_classes">
                                ${cargo_class}
                            </tal:block>
                        </td>
                    </tr>
                </tal:example_cargo>
            </tal:cargo_nodes>
        </table>

        <tal:example_cargo_nodes repeat="example_cargo_node sorted(cargo_class_scheme.example_cargos.items())">
            <tal:example_cargo define="example_cargo_node_id example_cargo_node[0]; example_cargo example_cargo_node[1];">
                <hr style="margin-top:30px; margin-bottom:30px;" />
                <h2 id="${example_cargo_node_id}">
                    ${example_cargo.name} <span class="muted">(example)</span>
                </h2>
                <table class="cargo-class-facts">
                    <tbody>
                        <tr>
                            <th>Vehicle description</th>
                            <td>${example_cargo.cargo_description}</td>
                        </tr>
                        <tr>
                            <th>Cargo classes</th>
                            <td>
                                <tal:block repeat="cargo_class example_cargo.cargo_classes">
                                    ${cargo_class}
                                </tal:block>
                            </td>
                        </tr>
                        <tr>
                            <th>Example vehicles</th>
                            <td>
                                <tal:block repeat="example_vehicle sorted(cargo_class_scheme.vehicle_cargo_mapping.get(example_cargo_node_id, []))">
                                    <tal:vehicle switch="example_vehicle in cargo_class_scheme.example_vehicles">
                                        <tal:valid_vehicle case="True">
                                            <a href="#${example_vehicle}">${cargo_class_scheme.example_vehicles[example_vehicle].name}</a><!--! whitespace shenans
                                         -->${',' if not repeat.example_vehicle.end else None}
                                        </tal:valid_vehicle>
                                        <tal:invalid_vehicle case="False">
                                            ${example_vehicle}
                                        </tal:invalid_vehicle>
                                    </tal:vehicle>
                                </tal:block>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </tal:example_cargo>
        </tal:example_cargo_nodes>

    </div>
</tal:page_with_sidebar_template>
