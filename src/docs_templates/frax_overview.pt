<tal:page_template metal:use-macro="load: frax_template.pt">
    <tal:title metal:fill-slot='title'>
        FRAX Cargo Classes for OpenTTD NewGRFs | Polar Fox
    </tal:title>
    <div metal:fill-slot='frax_body'>

        <h1>Overview and Cargo Classes</h1>

        <div class="pt-3 pb-3">
            <p>Sections:</p>
            <ul>
                <li><a href="#cargo-classes-table">Cargo Classes - Table</a></li>
                <li><a href="#cargo-classes-details">Cargo Classes - Details</a></li>
            </ul>
        </div>

        <hr />

        <div class="pt-4 pb-3">
            <h2 id="cargo-classes-table">Cargo Classes - Table</h2>
            <!--! table of contents -->
            <table class="table table-striped table-hover sortable mt-4">
                <thead class="table-light">
                    <tr>
                        <th data-type="string">Cargo class</th>
                        <th data-type="string">ID</th>
                        <th data-type="string">Cargo class category</th>
                        <th data-type="number">Bit number</th>
                    </tr>
                </thead>
                <tbody class="">
                    <tal:cargo_class_nodes repeat="cargo_class_node cargo_class_scheme.cargo_classes_taxonomy.items()">
                        <tal:cargo_class define="cargo_class_node_id cargo_class_node[0]; cargo_class cargo_class_node[1];">
                            <tr>
                                <td>
                                    <a class="${'do_not_use' if cargo_class.get('do_not_use', False) else ''}" href="#${cargo_class_node_id}"><!--! whitespace shenans
                                     -->${cargo_class.name}
                                        <span tal:condition="cargo_class.get('do_not_use', False)">(do not use)</span><!--! whitespace shenans
                                  --></a>

                                </td>
                                <td>${cargo_class_node_id}</td>
                                <td>${': '.join(cargo_class.cargo_class_taxonomy_tags)}</td>
                                <td><code>${cargo_class.bit_number}</code></td>
                            </tr>
                        </tal:cargo_class>
                    </tal:cargo_class_nodes>
                </tbody>
            </table>
        </div>

        <div class="pt-4 pb-3">
            <h2 id="cargo-classes-details">Cargo Classes - Details</h2>
            <tal:cargo_class_nodes repeat="cargo_class_node cargo_class_scheme.cargo_classes_taxonomy.items()">
                <tal:cargo_class define="cargo_class_node_id cargo_class_node[0]; cargo_class cargo_class_node[1];">
                    <div class="pt-3 pb-3">
                        <h3 id="${cargo_class_node_id}">
                            ${cargo_class.name} <span tal:condition="cargo_class.get('do_not_use', False)">(do not use)</span>
                        </h3>
                        <p>${cargo_class_node_id}</p>
                        <table class="cargo-class-facts">
                            <tbody>
                                <tr>
                                    <th>Cargo class category</th>
                                    <td>
                                        ${cargo_class.cargo_class_taxonomy_tags[0]}:
                                        <strong>${cargo_class.cargo_class_taxonomy_tags[1] if len(cargo_class.cargo_class_taxonomy_tags) > 1 else None}</strong>.
                                    </td>
                               </tr>
                                <tr>
                                    <th>Cargo class description</th>
                                    <td>
                                        <tal:list_items repeat="list_item cargo_class.cargo_class_description">
                                            <p>${list_item}</p>
                                        </tal:list_items>
                                    </td>
                               </tr>
                                <tr>
                                    <th>Example cargos</th>
                                    <td>
                                        <tal:block repeat="example_cargo sorted(cargo_class_scheme.cargo_cargo_class_mapping.get(cargo_class_node_id, []))">
                                            <tal:vehicle switch="example_cargo in cargo_class_scheme.example_cargos">
                                                <tal:valid_cargo case="True">
                                                    <a href="${docs_pages['industry_frax']}#${example_cargo}">${cargo_class_scheme.example_cargos[example_cargo].name}</a><!--! whitespace shenans
                                                 -->${',' if not repeat.example_cargo.end else None}
                                                </tal:valid_cargo>
                                                <tal:invalid_cargo case="False">
                                                    ${example_cargo}
                                                </tal:invalid_cargo>
                                            </tal:vehicle>
                                        </tal:block>
                                    </td>
                                </tr>
                                <tr>
                                    <th>Example vehicles</th>
                                    <td>
                                        <tal:block repeat="example_vehicle sorted(cargo_class_scheme.vehicle_cargo_class_mapping.get(cargo_class_node_id, []))">
                                            <tal:vehicle switch="example_vehicle in cargo_class_scheme.example_vehicles">
                                                <tal:valid_vehicle case="True">
                                                    <a href="${docs_pages['vehicle_frax']}#${example_vehicle}">${cargo_class_scheme.example_vehicles[example_vehicle].name}</a><!--! whitespace shenans
                                                 -->${',' if not repeat.example_vehicle.end else None}
                                                </tal:valid_vehicle>
                                                <tal:invalid_vehicle case="False">
                                                    ${example_vehicle}
                                                </tal:invalid_vehicle>
                                            </tal:vehicle>
                                        </tal:block>
                                    </td>
                                </tr>
                                <tr>
                                    <th>Industry GRF advice</th>
                                    <td>
                                        <tal:block condition="len(cargo_class.cargo_grf_advice) > 0">
                                            <tal:list_items repeat="list_item cargo_class.cargo_grf_advice">
                                                <p>${list_item}</p>
                                            </tal:list_items>
                                        </tal:block>
                                        <p tal:condition="cargo_class.fallback_to_piece_goods">This cargo class may not be widely supported by older vehicle GRFs. Also set CC_PIECE_GOODS as a fallback (recommended).</p>
                                    </td>
                                </tr>
                                <tr>
                                    <th>Vehicle GRF advice</th>
                                    <td>
                                        <p tal:condition="cargo_class.vehicle_set_as_allow and not cargo_class.vehicle_set_as_disallow">Valid only for <code>refittable_cargo_classes</code>.</p>
                                        <p tal:condition="cargo_class.vehicle_set_as_disallow and not cargo_class.vehicle_set_as_allow ">Valid only for <code>non_refittable_cargo_classes</code>.</p>
                                        <p tal:condition="cargo_class.vehicle_set_as_allow and cargo_class.vehicle_set_as_disallow">Valid for <code>refittable_cargo_classes</code> and <code>non_refittable_cargo_classes</code>.</p>
                                        <tal:block condition="len(cargo_class.vehicle_grf_advice) > 0">
                                            <tal:list_items repeat="list_item cargo_class.vehicle_grf_advice">
                                                <p>${list_item}</p>
                                            </tal:list_items>
                                        </tal:block>
                                    </td>
                                </tr>
                                <tr>
                                    <th>Bit number</th>
                                    <td><code>${cargo_class.bit_number}</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </tal:cargo_class>
            </tal:cargo_class_nodes>
        </div>

    </div>
</tal:page_template>
